<?xml version="1.0"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:c="http://java.sun.com/jsp/jstl/core"
	  xmlns:r="http://richfaces.org/rich">
	<body>
		<ui:composition template="/WEB-INF/templates/desktop/main.xml">
			<ui:define name="metadata">
				<f:event type="preRenderView" listener="#{artikel.createEmptyArtikel}"/>
			</ui:define>
			
			<ui:param name="pageTitle" value="#{msgKv['createArtikel.title']}"/>
		
			<ui:define name="content">
				<h1>
					#{msgKv['createArtikel.heading']}
				</h1>
		
				<r:messages id="fehlermeldungGobal" globalOnly="true"/>
				<r:notifyMessages id="notifyMessages" stayTime="2000" nonblocking="true"/>
		
				<h:form id="createArtikelForm">
					<r:jQuery id="bezeichnungFocus" selector="#bezeichnung" query="focus()"/>
					<!-- fokussiert auf id="kategorie" statt auf id="nachname" WARUM?
					<r:focus id="createKundeFormFocus"/>
					-->
					
					<c:set var="artikel" value="#{artikel.neuerArtikel}" scope="view"/>
					<!--
						https://issues.jboss.org/browse/AS7-1348
						http://community.jboss.org/thread/169487 
					-->
					
						<h:panelGrid id="createArtikelTabelle" columns="3">
				
							<h:outputLabel id="bezeichnungLabel" for="bezeichnung" value="#{msgKv['createPrivatkunde.bezeichnung']}"/>
							<h:inputText id="bezeichnung" value="#{artikel.bezeichnung}">
								<!-- Validierung durch Ajax mit JSF -->
								<!--
								<f:ajax event="blur" render="fehlermeldungenUmsatz"/>
								-->
								<!-- Validierung durch Javascript mit RichFaces -->
								<r:validator oninvalid="$(#{r:element('bezeichnung')}).addClass('invalid')"
	                                         onvalid="$(#{r:element('bezeichnung')}).removeClass('invalid')"/>
							</h:inputText>
							<r:messages id="fehlermeldungenNachname" for="bezeichnung"/>
				
							<h:outputLabel id="preisLabel" for="preis" value="#{msgKv['createArtikel.preis']}"/>
							<h:inputText id="preis" value="#{artikel.preis}"/>
							<f:verbatim/>
												
							
						</h:panelGrid>
			
						<p id="buttons">
							<h:commandButton id="createSubmit" action="#{artikelModel.createArtikel}" value="#{msgKv['createArtikel.submit']}"/>
							#{' '}
							<h:commandButton id="reset" type="reset" value="#{msgKv['createArtikel.reset']}"/>
						</p>
					</r:graphValidator>
				</h:form>
				
				<p id="hinweisPflichtfelder">
					#{msgKv['createArtikel.required']}
				</p>
			</ui:define>
		</ui:composition>
	</body>
</html>
